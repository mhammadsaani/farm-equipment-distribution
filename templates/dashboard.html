{% extends 'layouts/admin.html' %}
{% load static %}
{% block title %} Dashboard - FEDA {% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-3 col-sm-6 mb-3">
    <div class="card card-body shadow-sm">
      <h1>{{ product_count }}</h1>
      <a href="{% url 'after-sale-service:product.index' %}" class='btn btn-sm btn-outline-primary'><i class="bi bi-box me-1"></i> Products</a>
    </div>
  </div>
  <div class="col-md-3 col-sm-6 mb-3">
    <div class="card card-body shadow-sm">
      <h1>{{ service_count }}</h1>
      <a href="{% url 'after-sale-service:service.index' %}" class='btn btn-sm btn-outline-primary'><i class="bi bi-check2-circle me-1"></i> Services</a>
    </div>
  </div>
  <div class="col-md-3 col-sm-6 mb-3">
    <div class="card card-body shadow-sm">
      <h1>{{ '0' }}</h1>
      <a href="{% url 'home' %}" class='btn btn-sm btn-outline-primary'><i class="bi bi-chat-dots me-1"></i> Chat messages</a>
    </div>
  </div>
  <div class="col-md-3 col-sm-6 mb-3">
    <div class="card card-body shadow-sm">
      <h1>{{ notification_count }}</h1>
      <a href="{% url 'home' %}" class='btn btn-sm btn-outline-primary'><i class="bi bi-bell me-1"></i> Notifications</a>
    </div>
  </div>
  <div class='col-md-8 col-sm-12 mb-3' id='client-action-card'>
    <div class='card card-body shadow-sm'>
      <h4 class="fw-bold">Looking for farm equipment related services</h4>
      <p>
        Are you looking or selling spare parts, do you need or provide trainings. Do you have questions or can answer technical questions related to farm equipments.
        Do you need to purchase, hire, or re-sale farm equipment. Check out our numerous partners, services, products, and other offers to get started today.
      </p>
      <div class='d-flex'>
        <button class='btn btn-outline-primary' onclick="ignore('client-action-card')"><i class='bi bi-x-lg me-1'></i> Ignore</button>
        <a href="{% url 'after-sale-service:service.index' %}" class='btn btn-outline-primary ms-1'>Available offers <i class='bi bi-chevron-right ms-1'></i></a>
        <a href='{% url "qna:question.index" %}' class='btn btn-outline-primary ms-1'>Ask questions <i class='bi bi-chevron-right ms-1'></i></a>
        <a href="{% url 'contact' %}" class='btn btn-outline-primary ms-1'>Contact us <i class='bi bi-chevron-right ms-1'></i></a>
      </div>
    </div>
  </div>
  <div class='col-md-4 col-sm-12 mb-3' id='partner-action-card'>
    <div class='card card-body shadow-sm'>
      <h4 class="fw-bold">Partner with us</h4>
      <p>
        Are you a company, institution, garage, farmer association... Partner with us to help provide after-sale services to farm equipment buyers (owners).
      </p>
      <div class='d-flex'>
        <button class='btn btn-outline-primary' onclick="ignore('partner-action-card')"><i class='bi bi-x-lg me-1'></i> Ignore</button>
        <a href="{% url 'apply' %}" class='btn btn-outline-primary ms-1'>Get started <i class='bi bi-chevron-right ms-1'></i></a>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <canvas id="myChart" width="400" height="400"></canvas>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script src="{% static 'vendor/chartjs/chart.min.js' %}"></script>
<script>
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
function ignore(id='') {
  let list = localStorage.getItem('ignore-card')
  if (list) {
    list += '|' + id
    list = list?.split('|').filter((value, index, self) => self.indexOf(value) === index)
    list = list?.join('|')
  } else list = id
  localStorage.setItem('ignore-card', list)
  document.getElementById(id)?.classList.add('d-none')
}
document.addEventListener("DOMContentLoaded", function() {
  let list = localStorage.getItem('ignore-card')
  list?.split('|').map(id => ignore(id))
})
</script>
{% endblock %}
