{% extends 'layouts/admin.html' %}
{% load static %}
{% block title %} Feedback {% endblock %}
{% block content %}
<h4>All feedback forms</h4>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
    <li class="breadcrumb-item"><a href="{% url 'feedback:form.index' %}">Feedback</a></li>
    <li class="breadcrumb-item active" aria-current="page">All feedback forms</li>
  </ol>
</nav>
<div class="my-3">{% include 'partials/messages.html' %}</div>
<div class="table-responsive">
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Description</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      {% for form in page_object %}
      <tr>
        <td>{{ form.name }}</td>
        <td>{{ form.description|safe }}</td>
        <td>
          <a href='{% url "feedback:form.show" id=form.id %}' class='btn btn-sm btn-info m-1' title='view' data-toggle='tooltip'>
            <i class='bi bi-caret-right'></i>
          </a>
          {% if form.user_id == user.id or user.is_superuser %}
          <a href='{% url "feedback:response.show" id=form.id %}' class='btn btn-sm btn-primary m-1' title='response' data-toggle='tooltip'>
            <i class='bi bi-activity'></i>
          </a>
          <a href='{% url "feedback:form.edit" id=form.id %}' class='btn btn-sm btn-success m-1' title='edit' data-toggle='tooltip'>
            <i class='bi bi-pencil'></i>
          </a>
          <a href='{% url "feedback:form.delete" id=form.id %}' class='btn btn-sm btn-warning m-1' title='delete' data-toggle='delete'>
            <i class='bi bi-x-lg'></i>
          </a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div class="d-flex justify-content-between">
  <nav aria-label="pagination" class="d-inline">
    <ul class="pagination justify-content-center my-0">
      {% if page_object.has_previous %}
      <li class="page-item"><a class="page-link" href='?page={{ page_object.previous_page_number }}'><i class='bi bi-chevron-left'></i></a></li>
      {% endif %}
      <li class="page-item"><a class="page-link" href="#">{{ page_object.number }} / {{ page_object.paginator.num_pages }}</a></li>
      {% if page_object.has_next %}
      <li class="page-item"><a class="page-link" href='?page={{ page_object.next_page_number }}'><i class='bi bi-chevron-right'></i></a></li>
      {% endif %}
    </ul>
  </nav>
  {% if user.is_superuser %}
  <a href="{% url 'feedback:form.create' %}" class="btn btn-info"><i class='bi bi-plus-circle me-1'></i> New form</a>
  {% endif %}
</div>
{% endblock %}
