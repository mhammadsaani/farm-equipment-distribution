{% extends 'layouts/admin.html' %}
{% load static %}
{% block title %} Feedback {% endblock %}
{% block content %}
<h4>Add new form</h4>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
	<li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
	<li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
	<li class="breadcrumb-item"><a href="{% url 'feedback:form.index' %}">Feedback</a></li>
	<li class="breadcrumb-item active" aria-current="page">Add new form</li>
  </ol>
</nav>
<form action="#" method="post" enctype='multipart/form-data'>
	<div class="mb-2">
		<label for="name" class="form-label">Name</label>
		<input type="text" class="form-control" name="name" placeholder='form name' required/>
	</div>
	<div class="mb-2">
		<label for="content" class="form-label">Description</label>
		<textarea id='editor' class='form-control' name='description' placeholder="form description..."></textarea>
	</div>
	<div class='row bg-light p-4 my-3 rounded'>
		<div class='col-md-10' id='form-fields'>
			<div class='row'>
				<div class='col-md-5'>
					<input type='text' placeholder='field label' name='label' class='form-control' />
				</div>
				<div class='col-md-2'>
					<select class='form-control' name='type'>
						<option value=''> - field type - </option>
						<option value='number'>number</option>
						<option value='text'>text</option>
						<option value='long-text'>long-text</option>
						<option value='boolean'>boolean</option>
						<option value='date'>date</option>
						<option value='select'>select</option>
					</select>
				</div>
				<div class='col-md-2'>
					<select class='form-control' name='width'>
						<option value=''> - width - </option>
						<option value='1/2'>1/2</option>
						<option value='1/3'>1/3</option>
						<option value='1/4'>1/4</option>
						<option value='full'>full width</option>
					</select>
				</div>
				<div class='col-md-3 form-check mt-2'>
					<input type='checkbox' class='form-check-input mx-1' name='is_required' />
					<label class='form-check-label mx-1' for='is_required'>field is required</label>
				</div>
				<div class='mt-2 mb-4 col-md-12'>
					<textarea class='form-control' name='choice' placeholder='choice 1,choice 2'></textarea>
				</div>
			</div>
		</div>
		<div class='col-md-2 d-flex justify-content-between flex-column border-start border-2'>
			<button class='btn btn-info w-100 mb-2' id="add-field">
				<i class='bi bi-plus-circle me-1'></i> Add
			</button>
			<button class='btn btn-warning w-100 mb-5' id="remove-field">
				<i class='bi bi-dash-circle me-1'></i> Remove
			</button>
		</div>
	</div>
  {% csrf_token %}
  <div class='d-flex justify-content-between'>
		<button class="btn btn-primary" type="submit">Continue</button>
		<a class="btn btn-link" href="{% url 'feedback:form.index' %}">All forms</a>
  </div>
</form>
<div id='new-field' class='d-none'>
	<div class='row'>
		<div class='col-md-5'>
			<input type='text' placeholder='field label' name='label' class='form-control' />
		</div>
		<div class='col-md-2'>
			<select class='form-control' name='type'>
				<option value=''> - field type - </option>
				<option value='number'>number</option>
				<option value='text'>text</option>
				<option value='long-text'>long-text</option>
				<option value='boolean'>boolean</option>
				<option value='date'>date</option>
				<option value='select'>select</option>
			</select>
		</div>
		<div class='col-md-2'>
			<select class='form-control' name='width'>
				<option value=''> - width - </option>
				<option value='1/2'>1/2</option>
				<option value='1/3'>1/3</option>
				<option value='1/4'>1/4</option>
				<option value='full'>full width</option>
			</select>
		</div>
		<div class='col-md-3 form-check mt-2'>
			<input type='checkbox' class='form-check-input mx-1' name='is_required' />
			<label class='form-check-label mx-1' for='is_required'>field is required</label>
		</div>
		<div class='mt-2 mb-4 col-md-12'>
			<textarea class='form-control' name='choice' placeholder='choice 1,choice 2'></textarea>
		</div>
	</div>
</div>
{% endblock %}
{% block scripts %}
<script>
  document.getElementById('add-field').addEventListener('click', function(e) {
		e.preventDefault()
		const newField = document.getElementById('new-field').innerHTML
		document.getElementById('form-fields').innerHTML += newField
  })
  document.getElementById('remove-field').addEventListener('click', function(e) {
		e.preventDefault()
		const fields = document.getElementById('form-fields')
		if (document.querySelectorAll('input[name=label]').length > 2)
			fields.removeChild(fields.lastElementChild)
  })
</script>
{% endblock %}